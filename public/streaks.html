<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Streak Tracker â€“ Jumbo Habits</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
  <script src="protect.js"></script>
  <script src="navbar.js"></script>
</head>
<body>
  <div class="container">
    <h1>ðŸ”¥ Your Journal Streak</h1>
    <p class="streak-subtext">Stay consistent and see your progress day-by-day!</p>

    <div class="streak-tracker">
      <div id="monthly-calendar" class="calendar-grid"></div>
    </div>
  </div>

  <!-- <script>
    const userId = JSON.parse(localStorage.getItem("user")).userId;
    const streakKey = `journal_dates_${userId}`;
    const calendar = document.getElementById("monthly-calendar");

    const today = new Date();
    const todayStr = today.toISOString().split("T")[0];

    function renderCalendar() {
      const savedDates = JSON.parse(localStorage.getItem(streakKey)) || [];
      const year = today.getFullYear();
      const month = today.getMonth(); // 0-indexed
      const daysInMonth = new Date(year, month + 1, 0).getDate();

      calendar.innerHTML = "";

      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const dateStr = date.toISOString().split("T")[0];

        const box = document.createElement("div");
        box.className = "day-box";
        box.textContent = day;

        if (savedDates.includes(dateStr)) {
          box.classList.add("filled");
        }

        calendar.appendChild(box);
      }
    }

    renderCalendar();
  </script> -->

  <script>
    const user = JSON.parse(localStorage.getItem("user"));
    const userId = user ? user.userId : null;
    const streakKey = userId ? `journal_dates_${userId}` : null;
    const calendar = document.getElementById("monthly-calendar");
  
    if (userId && streakKey && calendar) {
      const savedDates = JSON.parse(localStorage.getItem(streakKey)) || [];
  
      const today = new Date();
      const year = today.getFullYear();
      const month = today.getMonth();
      const daysInMonth = new Date(year, month + 1, 0).getDate();
  
      calendar.innerHTML = "";
  
      for (let day = 1; day <= daysInMonth; day++) {
        const date = new Date(year, month, day);
        const dateStr = date.toISOString().split("T")[0];
  
        const box = document.createElement("div");
        box.className = "day-box";
        box.textContent = day;
  
        if (savedDates.includes(dateStr)) {
          box.classList.add("filled");
        }
  
        calendar.appendChild(box);
      }
    }
  </script>
</body>
</html>
